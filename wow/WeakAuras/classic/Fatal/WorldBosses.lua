--release
!1I1EpTvYv8Vl8p2ufJ8lSXRu(dhWgifmiFDw02KCThU3X2JY13XDM7fcuvRe1MhKTqwuBs6MOSTHS7QwTkajBLiDZUjFzWp4BrpZCFzSnSPQBJj45X5CMZCo)opguJPwsvPHQIU4hy4glvTkhBPwiQQcYuRoLTmLyAPQmDUcLYvuvrJsn0PRBQSoPjw9sblKtVgwDvvfIg1uSUfJuRgMXbPwqEkUligISzitudS7MkxYMzsmR1QswDg2ezqmXQfIRQSazn5YxI2yvvqj84bgQJx1UA1sBakHYCzlUy(RSGQcVoD9PnOMarGMyj3uZMBrB49DzNfXRHfxkBtc87MgOna9cM5UmY2I6tZCyKHvDyxoUaC8IRgmSSKvym3EvjHkG2qUPQs5PZQuQSsPSflfC2vTn1SiuZWJ36YTQ48XGQHmAvPkL2QYfBv531QYVpyty1RgkvSOzcDD5UHYUPndxJYdnanXINitApIwGY0Bv5xJ2Ct0ngIWKtn1u(eITQtnhfj(hyUgygHZhbnzI6rtjeMHyJsm(Q0NXPMGpTpAIeXx1tMXxJMHHrn4wiJBGzJI4jteZxMxgPJBqyTQSedPz0VSDTPRIysk5ydSMv4uxagAX4nniwHhlYyW0RaEVzVY8ZeoKfIvdBfA8X7Z1qQ6CQGCGJ0Qo2mypVpmSfaAHDz24GDXM6bt8iPkYGd0a7faxwMHLWfLLZTaaCfyzfa8UKPdiEjZSaGznaPYBInmMx3f1l5LRQS8cz)SCfldOSzZvQ80ZLTWS5MXhJxNOha8LW8(I98WKWgcOU8yk5S9IuGVcrIfvSde1JzqS4NcXWa0fIhZOQCdmUzwqL0SkIaaTikdzsAigBkeo4bzwYGDzyMjekcHQq0UGa3ypogYqaxifmIJHScyZAq8vHeolukGrqjAGiM)ckUQetcV(VCcuMhIJSecqM8RjJwJH5CW9QrCmBrLo9I4AWSGKHRcHQywzoztWIN0Foni7Rf(MwL1OguMJR3LcVvaXi(jUA(PYKo2uPtLjAY0XJNmAg1QrMmPqFbPaIgOkG71aLAvdzsm3vWI02kk)wBed3QsEBdi(zL6e464AJaL3HuN7BDmPwDl18zIgnDSmPMmD0etLkzIuWPMmTQIbfjRJaPTzu7MoQUiFPi3ktyIet0G85ilXmndeNlRbzByrKKBjb9AdVOWwnWIWYmPL1XTiR9OSjfW3ct4q2kXVti)TNDbsruDOkCM6elxVLvqbUsGdzgchb2pDjWxuLquMHQTMxmsSyjIcEtcePVcLzOFjkNdfJuUPBz18rsnvQeXJhnr0OrNm5KXsl8wqLUQmO2ca2qwizfrNAV5fR6C1uMUyUCfaZNq2Z2SXM53i1vS1)uP(wLuZrxjMcvb7QEGewQzF3K1j6asoFsaVen9KXtflnmmZucxxkajt4IkHZRjVijsgBYjbPy0SURgP5jPGOCDAzdkTPaobfM5OAGR1l9I)koWiLfHkIfZo)msUC3tONEdvgUCjGedmIlYR9rx(CGks(fpDlG0BR339FT3jp7OE7(Sop(Gwvc37p)8tE)xo(GLYovbvxMBV9l6S1oTVZNpeXofv9oJDEnCgDU9)eKE339bq6FsRkDE6tA)tVEOJXRwBG61BNVR3oBD8BFE)C37VUBVhEVH42TkSlZD((d785B1(W)s)C2((3T3p8DdXPxXzxwp(hFqNxUF73Feyzc4wm)n3g2Bi2pvnBpRZrVOZEFBVBDhHr9W)qVdE0XF4fDU9bdX8GfX94)b)D4a7(6VhUbWP35jp8Ce0G6Jn)gRtP6(MINUFVTEdCL68vpziJwDiB3CYACgiiBVVT)9pR7w)7235WbzipyKHCv(09W3aMza8miDz5q7cRHcUrDV9H9o8OrQ1JUDLyU9Ni62SV(tcyZJ(GwuOmNvp7ZOjLl5zwS1VbQDjYL1F0K32crcJDfPy1ZwKn41C9zpC3U7C4XV9XDF0FseRcaU(UUEKj)EIjgqrhA3qq7xMNVaod1sbAWA66iRfDsOegOhSKHG28wyMqJ))p66haagnIuzfoXyjBvrNoCRJtxUebI4NiBva9for0wv(vaBadJ6zcN1NpATlOZ0rSQO)6MmimiSffArgQA7RpJ76paGHow8cjDxxGge2BH7)movxVdNIwuetAuMwYPSOw4qYV6xks6(erJsCWUKt0PB4qqRTLkVOYSLxzU5HELlomdkylfngPj0A)sMsUgRFtzzyI4)I2PGVeVG8CSUIo)fucQRazhlzOZQ))b)mV5AqttI42W)mNHpmGkkwBvIwer0ppx(PmVd4hhrqj0(VPLBwQdoQ9b3T3bVQZ93DSyjhR3hEw339hBF)71z79o(N2(KNVxOrkH1rUVhxgEV3)O9(717vFB3V(hevHo4OJF7TAV)t7(I97T)x7iMoV6LWuhb35(Fr7h83A)f70(UBFYTUfCGNCVT784dB)JIXH(idDL3Ip24spf(Nj(msKREr4Fx1zf37BnBIHUZn9K3TBVDEt3V5R68OV0vpNUCEgboWfaq5eItEL60Wswg)usrZ1K7Mdp(fgGviVBb7gaZfXCO)vEyVe6dKZqkN(tA4kFawZ2WjiAaXcYCEZQ0WKbEaRKJjQcn0pRqDl4eeEr)l8WW6ZiLIxKNi6HyCH(LCHHr6NNR8)Dj1NF()oH5KKlexelvXIkRZisVDMm5h05pisKRlqpxx(sEyPlpyZPYoB5uB4D(I)WqYbkZlAXOksdFTS66q)ZxBfm6gzHhmYV2Y01Xm5WfX6e01ueCWVgVoPjF96G71apbTwnPyDBn2tULz4MqUu1ct601pXRDCx6w9uV219LsW7qIprS0taT1Vg0sFY4IxaP(Fc

-- trigger
function()
  local foo = { }
  foo['6109'] = 'Azuregos'
  foo['12397'] = 'Lord Kazzak'
  foo['14888'] = 'Lethon'
  foo['14889'] = 'Emeriss'
  foo['14890'] = 'Taerar'
  foo['14887'] = 'Ysondre'
  -- foo['12498'] = 'Dreamstalker'
  -- foo['5317'] = 'Jademir Oracle'
  local bar = select(6, strsplit("-", UnitGUID('target')))
  if foo[bar] then
    return true
  end
  return false
end

-- message
function WorldBossesMsg()
  local foo = { }

  foo['Azuregos'] = '艾索雷葛斯 (蓝龙)'
  foo['Lord Kazzak'] = '卡扎克'
  foo['Lethon'] = '莱索恩 (绿龙: 暗影)'
  foo['Emeriss'] = '艾莫莉丝 (绿龙: 蘑菇)'
  foo['Taerar'] = '泰拉尔 (绿龙: 分身)'
  foo['Ysondre'] = '伊森德雷 (绿龙:德鲁伊)'
  foo['Dreamstalker'] = '巡梦者 (调试信息)'
  foo['Jademir Oracle'] = '加德米尔龙族 (调试信息)'

  foo['Duskwood'] = '暮色森林'
  foo['The Hinterlands'] = '辛特兰'
  foo['Feralas'] = '菲拉斯'
  foo['Ashenvale'] = '灰谷'

  local bar = select(1, UnitName('target'))
  bar = foo[bar] or bar

  local pos = GetZoneText()
  pos = foo[pos] or pos

  local msg = '发现世界Boss: '
  msg = msg .. bar
  msg = msg .. ' in '
  msg = msg .. pos

  SendChatMessage(msg, 'GUILD')
  SendChatMessage(msg, 'GUILD')
  SendChatMessage(msg, 'GUILD')

  for i = 1, 14 do
    C_Timer.After(30 * i, function()
      SendChatMessage(msg, 'GUILD')
    end)
    -- print(tostring(30 * i) .. 's delayed msg create')
  end

  local frame = CreateFrame('Frame')
  frame:RegisterEvent('CHAT_MSG_WHISPER')
  frame:SetScript("OnEvent", function(_, _, text, name)
    if text == '14' then
      InviteUnit(name)
      ConvertToRaid()
    end
  end)

  local msg_hint = '请密语我"14"进组切换位面'
  local msg_warning = '墨客警示: 请一定确认位面正确切换成功后再退组重新开组'

  SendChatMessage(msg_hint, 'GUILD')
  SendChatMessage(msg_warning, 'GUILD')

  --[====[
  local guild = '黑莲神教'
  C_FriendList.SendWho(guild)
  local cnt = select(2, C_FriendList.GetNumWhoResults())
  for i = 1, cnt do
    local entry = C_FriendList.GetWhoInfo(i)
    if entry.fullGuildName == guild then
      SendChatMessage(msg, 'WHISPER', nil, entry.fullName)
      SendChatMessage(msg_hint, 'WHISPER', nil, entry.fullName)
      SendChatMessage(msg_warning, 'WHISPER', nil, entry.fullName)
      print('send to ' .. entry.fullName)
    end
  end
  --]====]
end

WorldBossesMsg()

-- macro
/tar Azuregos
/tar Lord Kazzak
/tar Lethon
/tar Emeriss
/tar Taerar
/tar Ysondre
/cast !Stealth
