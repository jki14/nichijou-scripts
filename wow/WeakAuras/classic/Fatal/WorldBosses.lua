--release
!1IvFpTrYz8Vl8p2ufq(nSXN09hoGnqkyqEDo01sx7HDhBpI174oZSqGQALO28c5kKlQnj9suU2WD9uRofGKRsKE5UKVm4x4BrFMz31RX2WDsnvMypV8828m)EEzIEu9I6A111mL)bdVXYvQWXc9CtKC6KXJfls8irImvIPIMsVYetftxBBpcYhrxdzBuJYwHsSf6AZKnFXSf01mOult6w2ABrAG1VAWcznRI1xxxJyqTLRlyKQvXmoO28kZWBb5qKddzJQJ92u7QomBID1MLZyYW2ilInwppynls2uT8vP1xxhmcFEGHM41DQuP42GrOnFMclL76lQRXRr3AglQnqeyjc1MgoCbTU)VLCxeVjwEOCSjW3nSqBd2fmZBzKJG2JM5XilrnyxoopOE5rdgwsXkmM7SUIqnWAi3qxR0mz0kwsRyMcW5K3aBzTGPNj7t6kmSIuTvYUiy0YZHgy4lB7Eaw2oJHGSPVvY11wzXmFA2cLazox2ILMz(m5Nl7SbNSko2adu7WJ38Anl7(XIAGSAwUcL2S8h3S8VRz5FFWMWQ)6qjJgjDOFJA3qz2XHHRs5HgGMOXINoLprlszMnl)lr7SdAJHimX0tpDpcXIAu7rrspfMToMr48rqt6i(0ueHzi2Oetpt6t5uBaX0hntmrptpr6Ew0SmmQoxGS2aZgfXtfpApzEnKjUoH1S8YmKHv)Y2ZNUoIPOKJTWgIWjVcmuW4nSiIWJnXyW0RdyJ5U(cZgoKaXQIfHgF8(UAivC1kihqLIAy7G98)WWciKa2L5Gd2fBBgmXNKkiloqdSxpmEnIzaWxbZ7l2Zh1aBiH6kOwr3TxIc8LFIOrK7ar9ygel(jqmmaUG4X06ABGXnYaOAdrbea5KrziBsD5yBPWbFmtOc2vHz2qOieQcr7sc8I94yidbetOHrCmKvaBxfIVYh3DHIbmcgrDeX(dO4QqSj8AF4eOkpehjKcqL8RbJwLH5Cie3G462IOc8lGRcZcsgUoemHzL4KDapEIEZPbzFf4BikzqTOm3ShEu4Vcig5FX0ZnD6urNovY0rsKkwSerslZKNqAVGuardufW9MGrTULkjM3kyzABnTFRdIHBwoNJfGWxTgbooE(iW4Dj198wdtQwdkGKosKurtNCQurIpDYeXtcAnrkDnlksvObsBZOonCnDz(szUvM0fjNya5Zrc5mdleNRks5yjikYfQ8MgdVO0xnWIWYmLN19Arv7rBhkGVLUWH8vYVJR(23ViVQjcVRgrq1SIG3FwchboltfkxwsqwtHASPFar0OXJaxDeiWBvkZY8QuohQ8aaiRkdu1ScdkDayjKaPk45wAnNCvxlxBMczZMh8osPnxJ67KB7Kx3X8tuwyfsvxRJylvo2ZGajSCJ(S9TiMaqnxcaoej1uXsgnfmm90YBMKaqLWLf6wWqz6XteDQPaPy1OMNfz4lPGGytAjlkTHeTa1D5OQWnNF2JER4Is0wck4viZcZQ4YBpPD6puliZtZR5xXcGAboUL4v)zxbBGIc9QF5LdV7UVRZ)(GZE2jDF4ZA)4JAwoC3)8Zp7DFX4dwn5C108yU1EVO9U7362F2qe7wxZxh7)kqhTV1)cKEN3(Eq6FuZYTF6tA9JVAi14xUlW86U)32D)Dp9npVFU7(xFy3hC3H42RqOhZT)UJB)z7264)s)C26E3P73)TdXPF9rpwp9hUF7V6WwV7eWZeWTC(RVfS3qSFUYM(ENtEr7d(MU382sN6X)HUh9OtF)lAFRJgI5bRJ6Z)9)7Gc78QVdobG2B)KhCjcAq7XHVXwuQzpxXtpS7UVgosT)YNmKtRgKoBEvrmleKoVNV)DpRZU)Nw3(4bzih4KHKr9O7bVgCZa4zq6YWHk2BIcorDU1XDp(KrA1JUJHOETiiBNSVwecyZN(GUeOm3vVyD0GYv8mhw8RGItY8x9hn5VTuKWyprkx9IfzDEvV7Sh8Wo7F8PV5XDE0FsgRcaU(oU(KP(DYjhWqhA3qqhq2xUaUaZsd6XzMAiXsUPucd0dEYqqNwloBOX))hD9daaNgrzSYlXOjAw2KoC3BZuQibI4Nmtfa9foEKML)faBadJQt9l6ZpBRlO5WrSQSf3gmimiSGcDPcLL7zpJ7DFaadtS8jqMExbgqyVa3VooxJNdNIwwgt5uMrXPQSw4qQF6xkk6(izNqCWVKv(4MWHGxZuS0sAZvA15xaEquHHzqdl0myKgq31lBR4AS(DLLGjY)j7xc(r(eXlX7kB(wsjyUsKD0eHUOwWh8Zc2BcDfjJBd)tOJEWaQSCTOiTaIyEzx5NZ9oW94ickH(7TfEzPo6KwhDNUh9Y237HJfnXyDF)Z682)yR7D327DWP)4EN98dcnsjSfY7b3QW7d(NTo8GUV8B681FVSk0rNC6BUzRdFANxCy3d)AxX0(LFfm1vWTV3N36()TwF((TUZENDZBck8S7Ux7hFCRFqo(Ysew1Hyz6Q0ZE7d7U)R78p(Y2p6l6JLzkLJraxWIagzsziWQ1OHvSnCRbgEEbV0QXUYaSdPcZ7uheqbmh6zKhU)CSdekRK1OIL90fG6yB7IXhqfG8xWUcnmzexWs0MIZjRanwpN8yK3nw5J75mUC03fKfWpyrc4jwxPFTK)YbNJqGk80hEP6HX(FtWU5UcXLHiLfuv5dzwRFsbmymL6fYWkxBWoovnSYPoW7NL)35OgOTGSVHkid8AzmnH2IxBvmAJmWZ84RTcDlmtnCjSjbTMMKd(A8AKg8TQbGcl8K0QvvI1RJxF5wIHBaji1ZpLBZ8e)US9OB9Z9gvV33apOi2Krtnj0T(MqN6jIjF3I()9

-- trigger
function()
  local foo = { }
  foo['6109'] = 'Azuregos'
  foo['12397'] = 'Lord Kazzak'
  foo['14888'] = 'Lethon'
  foo['14889'] = 'Emeriss'
  foo['14890'] = 'Taerar'
  foo['14887'] = 'Ysondre'
  -- foo['12498'] = 'Dreamstalker'
  -- foo['5317'] = 'Jademir Oracle'
  local bar = select(6, strsplit("-", UnitGUID('target')))
  if foo[bar] then
    return true
  end
  return false
end

-- message
function WorldBossesMsg()
  local foo = { }

  foo['Azuregos'] = '艾索雷葛斯 (蓝龙)'
  foo['Lord Kazzak'] = '卡扎克'
  foo['Lethon'] = '莱索恩 (绿龙: 暗影)'
  foo['Emeriss'] = '艾莫莉丝 (绿龙: 蘑菇)'
  foo['Taerar'] = '泰拉尔 (绿龙: 分身)'
  foo['Ysondre'] = '伊森德雷 (绿龙:德鲁伊)'
  foo['Dreamstalker'] = '巡梦者 (调试信息)'
  foo['Jademir Oracle'] = '加德米尔龙族 (调试信息)'

  foo['Duskwood'] = '暮色森林'
  foo['The Hinterlands'] = '辛特兰'
  foo['Feralas'] = '菲拉斯'
  foo['Ashenvale'] = '灰谷'

  local bar = select(1, UnitName('target'))
  bar = foo[bar] or bar

  local pos = GetZoneText()
  pos = foo[pos] or pos

  local msg = '发现世界Boss: '
  msg = msg .. bar
  msg = msg .. ' in '
  msg = msg .. pos

  SendChatMessage(msg, 'GUILD')
  SendChatMessage(msg, 'GUILD')
  SendChatMessage(msg, 'GUILD')

  for i = 1, 14 do
    C_Timer.After(30 * i, function()
      SendChatMessage(msg, 'GUILD')
    end)
    -- print(tostring(30 * i) .. 's delayed msg create')
  end

  local frame = CreateFrame('Frame')
  frame:RegisterEvent('CHAT_MSG_WHISPER')
  frame:SetScript("OnEvent", function(_, _, text, name)
    if text == '14' then
      InviteUnit(name)
      ConvertToRaid()
    end
  end)

  local msg_hint = '请密语我"14"进组切换位面'
  local msg_warning = '墨客警示: 请一定确认位面正确切换成功后再退组重新开组'

  local guild = '黑莲神教'
  C_FriendList.SendWho(guild)
  local cnt = select(2, C_FriendList.GetNumWhoResults())
  for i = 1, cnt do
    local entry = C_FriendList.GetWhoInfo(i)
    if entry.fullGuildName == guild then
      SendChatMessage(msg, 'WHISPER', nil, entry.fullName)
      SendChatMessage(msg_hint, 'WHISPER', nil, entry.fullName)
      SendChatMessage(msg_warning, 'WHISPER', nil, entry.fullName)
      print('send to ' .. entry.fullName)
    end
  end
end

WorldBossesMsg()

-- macro
/tar Azuregos
/tar Lord Kazzak
/tar Lethon
/tar Emeriss
/tar Taerar
/tar Ysondre
/cast !Stealth
